<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Customer Type Selection</title>
    <link rel="stylesheet" href="registration1.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manjari:wght@100;400;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <script src="../js/navigation.js"></script>
    <div class="customer-type-page">
      <h1 class="direction-text">Customer Type</h1>
      <script src="../js/api-config.js"></script>
      <script src="../js/form-utils.js"></script>
      <script src="../js/registration-manager.js"></script>
      <link rel="stylesheet" href="../js/univault-ui.css">
      
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const accountOwner = document.getElementById('account-owner');
          const businessOwner = document.getElementById('business-owner');
          const form = document.querySelector('.checkbox-container');

          // Add hidden input for form data
          const hiddenInput = document.createElement('input');
          hiddenInput.type = 'hidden';
          hiddenInput.name = 'customerType';
          form.appendChild(hiddenInput);

          accountOwner.addEventListener('change', function() {
            if (this.checked) {
              businessOwner.checked = false;
              hiddenInput.value = 'account_owner';
            }
          });

          businessOwner.addEventListener('change', function() {
            if (this.checked) {
              accountOwner.checked = false;
              hiddenInput.value = 'business_owner';
            }
          });

          // Initialize registration manager
          RegistrationManager.initializeStepForm(1, form, {
            customerType: { required: true }
          });

          // Load saved data if any
          const savedData = RegistrationManager.getStepData(1);
          if (savedData.customerType) {
            if (savedData.customerType === 'account_owner') {
              accountOwner.checked = true;
            } else if (savedData.customerType === 'business_owner') {
              businessOwner.checked = true;
            }
            hiddenInput.value = savedData.customerType;
          }
        });
      </script>
      
      <!-- Progress indicator -->
      <div class="form-progress">
        <div class="form-progress-bar">
          <div class="form-progress-fill"></div>
        </div>
        <div class="form-progress-text"></div>
      </div>
      
      <form class="checkbox-container">
        <div class="checkbox">
          <input type="checkbox" id="account-owner" />
          <label>
            <span class="title">Account Owner</span><br />
            <span class="description">
              For individuals opening a personal account for their own use.
            </span>
          </label>
        </div>

        <div class="checkbox">
          <input type="checkbox" id="business-owner" name="customerType" />
          <label>
            <span class="title">Business Owner / Officer / Signatory</span
            ><br />
            <span class="description">
              For individuals registering on behalf of a business or
              organization.
            </span>

            <h5 class="additional-description">
              <span class="blue-text">
                Includes business owners, company officers, or authorized
                signatories.
              </span>
            </h5>
          </label>
        </div>

        <div
          id="error-message"
          class="error-message"
          style="font-size: 20px; color: red; padding-left: 40px"
        ></div>

        <div class="button-container">
          <button id="back" type="button">Back</button>
          <button id="proceed" type="submit">Proceed</button>
        </div>
      </form>
      <script type="module" src="registration1.js"></script>
    </div>
  </body>
</html>